global:
  storageClass: local-path
  clusterName: "kind-local"
  cloud: "other"
telemetryStoreMigrator:
  enableReplication: false
  timeout: "20m"
clickhouse:
  enabled: true
  zookeeper:
    enabled: true
    readinessProbe:
      enabled: true
      initialDelaySeconds: 15
      periodSeconds: 5
    livenessProbe:
      enabled: true
      initialDelaySeconds: 30
      periodSeconds: 10
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
  persistence:
    enabled: true
    storageClass: local-path
    size: 10Gi
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
  layout:
    shardsCount: 1
    replicasCount: 1
  settings:
    prometheus/endpoint: /metrics
    prometheus/port: 9363
  podAnnotations:
    signoz.io/scrape: "true"
    signoz.io/port: "9363"
    signoz.io/path: "/metrics"
otelCollector:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
  config:
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: "0.0.0.0:4317"
          http:
            endpoint: "0.0.0.0:4318"
      prometheus:
        config:
          scrape_configs:
            - job_name: 'ray-serve'
              kubernetes_sd_configs:
                - role: pod
              relabel_configs:
                - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_component]
                  action: keep
                  regex: ray-serve-app
                - source_labels: [__meta_kubernetes_pod_ip]
                  target_label: __address__
                  replacement: '$1:8001'
                - source_labels: [__meta_kubernetes_namespace]
                  target_label: k8s_namespace
                - source_labels: [__meta_kubernetes_pod_name]
                  target_label: k8s_pod_name
            - job_name: 'ray-cluster'
              static_configs:
                - targets: ['ray-head.ray-system.svc.cluster.local:8080']
            - job_name: 'postgres'
              static_configs:
                - targets: ['app-postgres-r.databases.svc.cluster.local:9187']
    processors:
      batch:
        send_batch_size: 1000
        timeout: 10s
      k8sattributes:
        extract:
          metadata:
            - k8s.pod.name
            - k8s.pod.uid
            - k8s.deployment.name
            - k8s.namespace.name
            - k8s.node.name
    exporters:
      clickhousetraces:
        datasource: "tcp://signoz:27ff0399-0d3a-4bd8-919d-17c2181e6fb9@clickhouse.signoz.svc.cluster.local:9000/signoz_traces"
      signozclickhousemetrics:
        dsn: "tcp://signoz:27ff0399-0d3a-4bd8-919d-17c2181e6fb9@clickhouse.signoz.svc.cluster.local:9000/signoz_metrics"
      clickhouselogsexporter:
        dsn: "tcp://signoz:27ff0399-0d3a-4bd8-919d-17c2181e6fb9@clickhouse.signoz.svc.cluster.local:9000/signoz_logs"
    service:
      pipelines:
        traces:
          receivers: [otlp]
          processors: [k8sattributes, batch]
          exporters: [clickhousetraces]
        metrics:
          receivers: [otlp, prometheus]
          processors: [k8sattributes, batch]
          exporters: [signozclickhousemetrics]
        logs:
          receivers: [otlp]
          processors: [k8sattributes, batch]
          exporters: [clickhouselogsexporter]
  podAnnotations:
    signoz.io/scrape: "true"
    signoz.io/port: "8888"
frontend:
  replicaCount: 1
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
queryService:
  replicaCount: 1
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
  podAnnotations:
    signoz.io/scrape: "true"
    signoz.io/port: "8080"